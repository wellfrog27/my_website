---
title: 数据类型
date: 2016-02-07
author: 阮一峰
series: C语言系列教程
---

## int

C 语言的整数类型共有8种。

- short int
- unsigned short int
- int
- unsigned int
- long int
- unsigned long int
- long long int
- unsigned long long int

## 整数的进制

整数常量表示的时候，可以采用十进制、八进制、十六进制。

八进制使用`0`作为前缀，比如`017`、`0377`。

十六进制使用`0x`作为前缀，比如`0xf`、`0xff`。

## 编译器的自动类型判断

对于整数常量，编译器会自动将它处理为`int`类型。如果常量的值太大，无法放入`int`，就用`long int`类型。如果还是太大，则使用`unsigned long int`类型。

如果想让编译器直接将整数常量作为长整数处理，只需在后面加上一个字母`L`或`l`。比如，`15L`、`0377L`、`0x7fffL`。

为了指明是无符号常量，可以在常量后面加上字母`U`或`u`。比如，`15U`、`0377U`。

`L`和`U`可以结合使用，表示常量既是长整型又是无符号的。比如`0xfffffffUL`。（字母`L`和`U`的顺序和大小写无所谓。）

字母`LL`或`ll`，表示整数常量是`long long int`类型。

对于浮点数，编译器默认以双精度储存。如果要以单精度储存，浮点数常量的后面要添加`F`或`f`。如果要以`long double`储存，要添加`L`或`l`。

## 浮点数

C 语言提供三种浮点数类型。

- float
- double
- long double

单精度浮点数为32位，双精度浮点数为64位。浮点数的计算是不精确的。

单精度提供6位精度，双精度提供15为精度。

小数默认为双精度，除非标明`f`。

## 字符

字符的类型是`char`。

```c
char ch;

ch = 'a';
```

字符类型本质是0到127的整数。

## 布尔值

C语言没有布尔值，`0`被当成`false`，所有非零值被当成`true`。

```c
i = 0;
while (i - 10) {
// ...
```

## 类型的自动转换

当不同类型的数据互相运算时，宽度较小的类型会转换到与另一个运算子相同宽度。

## 变量的截值（Truncation）

将长度较宽的类型的值，赋给长度较小的类型的值，这个值的高位会被自动去除。

```javascript
char ch;
int i;

i = 321;
ch = i; // ch 的值是 65 （321 - 256）
```

浮点数赋值给整数类型的值，小数部分会被截去。

```c
double pi;
int i;
pi = 3.14159;
i = pi; // i 的值为 3
```

为了避免这个问题，整数运算时可能需要明确将类型转为浮点数。

```c
int score;

/* 写法一 */
score = ((double)score / 20) * 100;

/* 写法二 */
score = (score / 20.0) * 100;
```
